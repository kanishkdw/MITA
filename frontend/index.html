<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MITA Transportation Scheduler</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-gray-100 text-gray-900 scroll-smooth">
  <!-- Header -->
  <header class="bg-indigo-600 text-white p-5 shadow-md flex flex-col md:flex-row md:justify-between md:items-center gap-2 sticky top-0 z-50">
    <h1 class="text-2xl font-bold">MITA Transportation Scheduler 🚌</h1>
    <nav class="flex flex-wrap gap-2">
      <button onclick="scrollToSection('route-planner')" class="nav-btn">🧭 Route</button>
      <button onclick="scrollToSection('live-tracking')" class="nav-btn">🛰 Tracking</button>
      <button onclick="scrollToSection('trip-history-block')" class="nav-btn">📜 History</button>
      <button onclick="scrollToSection('favorites-block')" class="nav-btn">⭐ Favorites</button>
      <button onclick="scrollToSection('analytics')" class="nav-btn">📊 Analytics</button>
      <button onclick="toggleChatbot()" class="nav-btn">💬 Chatbot</button>
    </nav>
  </header>

  <!-- Route Planner -->
  <main class="grid md:grid-cols-3 gap-6 p-4" id="route-planner">
    <section class="bg-white p-4 rounded-lg shadow space-y-4">
      <h2 class="text-xl font-bold">Plan Your Route</h2>
      <input id="source" type="text" placeholder="Enter Source" class="w-full p-2 border rounded" />
      <input id="destination" type="text" placeholder="Enter Destination" class="w-full p-2 border rounded" />
      <div class="flex gap-4">
        <input id="travel-date" type="date" class="w-1/2 p-2 border rounded" />
        <input id="travel-time" type="time" class="w-1/2 p-2 border rounded" />
      </div>
      <button onclick="getCurrentLocation()" class="bg-blue-600 text-white w-full py-2 rounded hover:bg-blue-700">
        📍 Use Current Location
      </button>
      <button onclick="findSmartRoute()" class="bg-green-600 text-white w-full py-2 rounded hover:bg-green-700">
        🧠 Smart Route to Manipal
      </button>
      <button onclick="findRoute()" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">
        🚀 Manual Route
      </button>
    </section>

    <section class="md:col-span-2 space-y-4">
      <div id="map" class="w-full h-[400px] rounded-lg shadow"></div>
      <div id="route-results" class="bg-white p-4 rounded shadow"></div>
    </section>
  </main>

  <!-- Live Tracking & Share -->
  <section id="live-tracking" class="p-4 grid md:grid-cols-2 gap-4">
    <div class="bg-white p-4 rounded-lg shadow">
      <h3 class="font-semibold text-lg mb-2">🚍 Live Vehicle Tracking</h3>
      <div id="live-status" class="text-sm mb-2">Tracking will appear here...</div>
      <button onclick="simulateLiveBusRoute()" class="bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700">
        ▶️ Start Live Bus Simulation
      </button>
    </div>
    <div class="bg-white p-4 rounded-lg shadow flex flex-col justify-between">
      <h3 class="font-semibold text-lg mb-2">📤 Share This Trip</h3>
      <button onclick="shareTrip()" class="bg-green-600 text-white py-2 rounded hover:bg-green-700 transition">
        🔗 Share Trip
      </button>
    </div>
  </section>

  <!-- History & Favorites -->
  <section class="p-4 grid md:grid-cols-2 gap-4">
    <div id="trip-history-block" class="bg-white p-4 rounded-lg shadow">
      <h3 class="font-semibold text-lg mb-2">🕓 Trip History</h3>
      <ul id="trip-history" class="text-sm list-disc pl-4 space-y-1"></ul>
    </div>
    <div id="favorites-block" class="bg-white p-4 rounded-lg shadow">
      <h3 class="font-semibold text-lg mb-2">⭐ Favorite Trips</h3>
      <ul id="favorites" class="text-sm list-disc pl-4 space-y-1"></ul>
    </div>
  </section>

  <!-- Analytics -->
  <section id="analytics" class="p-4">
    <div class="bg-white p-4 rounded-lg shadow">
      <h3 class="text-xl font-semibold mb-4">📊 Trip Analytics</h3>
      <div id="analytics-panel" class="grid md:grid-cols-2 gap-4 text-sm">
        <div class="p-4 border rounded">
          <p><b>Total Trips Made:</b> <span id="total-trips">-</span></p>
          <p><b>Total Favorites:</b> <span id="total-favorites">-</span></p>
        </div>
        <div class="p-4 border rounded">
          <p><b>Most Visited Destination:</b> <span id="most-destination">-</span></p>
          <p><b>Average Trip Duration:</b> <span id="average-duration">-</span></p>
        </div>
      </div>
    </div>
  </section>

  <!-- Chatbot -->
  <div id="chatbot-window" class="fixed bottom-24 right-6 w-80 bg-white text-black shadow-lg rounded-lg p-3 hidden z-50">
    <h3 class="text-lg font-bold mb-2">SmartBot 🤖</h3>
    <div id="chat-display" class="h-48 overflow-y-auto border p-2 mb-2 text-sm"></div>
    <input
      type="text"
      id="chat-input"
      placeholder="Type your query..."
      class="w-full p-2 border rounded"
      onkeydown="if(event.key==='Enter'){sendChatMessage()}"
    />
  </div>
  <!-- Chatbot Icon Button -->
<div id="chatbot-toggle"
onclick="toggleChatbot()"
class="fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-Black w-14 h-14 rounded-full flex items-center justify-center shadow-lg cursor-pointer z-50">
💬
</div>

  


  <!-- Script references -->
  <script src="script.js" defer></script>
  <!-- ✅ Map API with correct callback -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDIrJf4LnUhcQXJa9Dokde7kKMdB2Q0wQE&libraries=places&callback=initMap" async defer></script>
  <script src="chatbot.js" defer></script>

</body>
</html>
